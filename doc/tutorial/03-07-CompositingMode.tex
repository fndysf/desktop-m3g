\subsection{コンポジティングモード}

フレームバッファーおよびデプスバッファーまわりの設定はCompositingModeクラスが行います。


\subsubsection{デプステスト}
デプステストをポリゴン単位で一時的に有効化・無効化します。

\begin{verbatim}
void 	setDepthTestEnable (bool enable)
\end{verbatim}

現在のデプステストの有効・無効はisDepthTestEnabled()メソッドで取得できます。

\begin{verbatim}
bool 	isDepthTestEnabled () const
\end{verbatim}


\subsubsection{αテスト}


フラグメントのαテストの閾値をsetAlphatThreashold()メソッドでしていします。

\begin{verbatim}
void 	setAlphaThreshold (float threshold)
\end{verbatim}

指定したthresholdより小さいαを持つフラグメントはフレームバッファーに書き込まれることなく棄却されます。
threshold=0を指定するとαテストそのものを無効化できます。

現在のαテストの閾値はgetAlphaThreshold()メソッドで取得できます。

\begin{verbatim}
float 	getAlphaThreshold () const
\end{verbatim}

\subsubsection{デプスバッファーへの書き込み}

デプスバッファーへの書き込みをsetDepthWriteEnable()メソッドで制御します。
enable=falseの時デプスバッファーへの書き込みは行われません。
このメソッドはデプステストが行われるかどうかには関与しません。
典型的には半透明物体の書き込み時にオフにされます。
\begin{verbatim}
void 	setDepthWriteEnable (bool enable)
\end{verbatim}

現在のデプスバッファーへの書き込みの可否はisDepthWriteEnabled()メソッドで取得できます。

\begin{verbatim}
bool 	isDepthWriteEnabled () const 
\end{verbatim}

\subsubsection{カラーコンポーネントへの書き込み}
フレームバッファーのカラーコンポーネントへの書き込みをsetColorWriteEnable()メソッドで制御します。
カラーコンポーネントはr,g,bの３チャネル同時に制御し、チャネル毎に個別に制御する事はできません。
αチャネルには影響しません。

\begin{verbatim}
void 	setColorWriteEnable (bool enable)
\end{verbatim}

現在のカラーコンポーネントへの書き込みの可否はisColorWriteEnalbed()メソッドで取得します。

\begin{verbatim}
bool 	isColorWriteEnabled () const
\end{verbatim}

\subsubsection{αコンポーネントへの書き込み}
フレームバッファーαコンポーネントへの書き込みをsetAlphaWriteEnable()メソッドで制御します。
カラーコンポーネントには影響しません。

\begin{verbatim}
void 	setAlphaWriteEnable (bool enable)
\end{verbatim}

現在のαコンポーネントへの書き込みの可否はisAlphaWriteEnalbed()メソッドで取得します。

\begin{verbatim}
bool 	isAlphaWriteEnabled () const
\end{verbatim}


\subsubsection{ブレンディング}

フラグメントをフレームバッファーへ書き込むときの演算方法を制御します。

\begin{verbatim}
void 	setBlending (int mode)
\end{verbatim}

modeはALPHA, ALPHA\_ADD, MODULATE, MODULATE\_x2, REPLACEの中から1つを選択します。

ここに表。
\begin{tabular}{ll}
  ALPHA        & あとで書く  \\
  ALPHA\_ADD   & あとで書く  \\
  MODULATE     & あとで書く  \\
  MODULATE\_x2 & あとで書く  \\
  REPLACE      & あとで書く 
\end{tabular}

現在のブレンディングモードはgetBlending()メソッドで取得できます。

\begin{verbatim}
int 	getBlending () const
\end{verbatim}

\subsubsection{デプスオフセット}

setDepthOffset()メソッドでデプスオフセットの設定を行います。

\begin{verbatim}
void 	setDepthOffset (float factor, float units)
\end{verbatim}

デプスオフセットではfactorとunitsを設定します。
最終的はオフセット量は以下の式で計算されます。

ここに式。

オフセットの計算はNDCで行われます（本当？）。

現在のデプスオフセットの設定はgetDepthOffsetFactor()メソッドとgetDepthOffsetUnits()メソッドで取得します。

\begin{verbatim}
float 	getDepthOffsetFactor () const
float 	getDepthOffsetUnits () const
\end{verbatim}
