\subsection{バックグラウンド}

背景画像および色はBackgroundクラスで扱います。
インスタンス化したBackgroundオブジェクトはWorldクラスのsetBackground()メソッドで登録します。

\begin{verbatim}
Background* bg = new Background;
wld->setBackground (bg);
\end{verbatim}

\subsubsection{背景色}

背景をクリアするかどうかの設定はsetColorClearEnable()メソッドで行います。
デフォルトはenable=yesです。
\begin{verbatim}
void 	setColorClearEnable (bool enable)
\end{verbatim}

同様にZバッファーのクリアはsetDepthClearEnable()メソッドで行います。
デフォルトはenable=yesです。

\begin{verbatim}
void 	setDepthClearEnable (bool enable)
\end{verbatim}

現在のカラバッファーのクリアとデプスバッファーのクリアの状態は
isColorClearEnabled(), isDepthClearEnabled()メソッドで取得できます。

\begin{verbatim}
bool 	isColorClearEnabled () const
bool 	isDepthClearEnabled () const 
\end{verbatim}

背景色の設定はsetColor()メソッドで行います。
デフォルトは黒色(0,0,0)です。
（a有効だっけ？)

\begin{verbatim}
void 	setColor (int argb)
\end{verbatim}

\subsubsection{背景画像}

背景を単一の色で塗りつぶす代わりに画像を使うにはsetImage()メソッドを使います。
引数にはImage2Dオブジェクトを渡します。
背景画像にはjpegかpngが利用できます。
現在のDesktop-M3Gの実装ではpngのみサポートしています。
デフォルトで背景画像はありません。

\begin{verbatim}
void 	setImage (Image2D *image)
\end{verbatim}

設定した画像はgetImage()メソッドで取得できます。

\begin{verbatim}
Image2D * 	getImage () const 
\end{verbatim}

デフォルトでは指定した画像がビューポート全体に一枚絵として表示されます。
setCrop()メソッドで画像のクロップ領域（画像から一部分を切り出す矩形）を
設定する事ができます。

\begin{verbatim}
void 	setCrop (int crop_x, int rop_y, int width, int height)
\end{verbatim}

クロップ領域はピクセルで起点(x,y)と(width,height)を指定します。
座標は画像の左下が(0,0)で右上が(width-1,height-1)です。
（これ本当？）
例えば毎フレームクロップ領域を移動する事で背景画像をスクロールさせる事ができます。
クロップ領域の指定は画像サイズ(0,0)〜(width-1,height-1)に限定されません。
画像サイズを超える領域を指定した場合の取り扱い方法はsetImageMode()メソッドで指定します。

現在のクロップ領域はgetCropX(), getCropY(), getCropWidth(), 
getCropHeight(),メソッドで取得します。

\begin{verbatim}
int 	getCropHeight () const
int 	getCropWidth () const
int 	getCropX () const
int 	getCropY () const 
\end{verbatim}

\begin{verbatim}
void 	setImageMode (int mode_x, int mode_y)
\end{verbatim}

有効なイメージモードはBORDERとREPEATです。X方向とY方向は別個に指定できます。
BORDERは領域外は再外周部のピクセルを伸張して使います。
REPEATは画像を繰り返します。画像を敷き詰めた仮想的なタイルから色を取得します。
デフォルトは？？？です。

現在のイメージモードはgetImageModeX(), getImageModeY()メソッドで取得します。

\begin{verbatim}
int 	getImageModeX () const
int 	getImageModeY () const 
\end{verbatim}




