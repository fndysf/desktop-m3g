\subsection{バックグラウンド}

背景の色および画像の設定はBackgroundクラスで扱います。
インスタンス化したのちWorldクラスのsetBackground()メソッドで登録します。

\begin{verbatim}
Background* bg = new Background;
wld->setBackground (bg);
\end{verbatim}

\subsubsection{背景色}

レンダリング前にフレームバッファーをクリアするかどうかの設定は
setColorClearEnable()メソッドで行います。
デフォルトはenable=yesで、黒色、透明(0,0,0,0)でクリアされます。

\begin{verbatim}
void 	setColorClearEnable (bool enable)
\end{verbatim}

現在のカラバッファーのクリア設定は
isColorClearEnabled()メソッドで取得できます。

\begin{verbatim}
bool 	isColorClearEnabled () const
\end{verbatim}

同様にZバッファーのクリアはsetDepthClearEnable()メソッドで行います。
デフォルトはenable=yesで、Zバッファーの表現できる最大値でクリアされます。

\begin{verbatim}
void 	setDepthClearEnable (bool enable);
\end{verbatim}

現在のデプスバッファーのクリア設定は
isDepthClearEnabled()メソッドで取得できます。

\begin{verbatim}
bool 	isDepthClearEnabled () const 
\end{verbatim}

背景色の設定はsetColor()メソッドで行います。
背景画像が設定されていない場合はビューポート全体がこの色でクリアされます。
画像が設定されていて繰り返しモードがBORDERの場合、画像の範囲外はこの色でクリアされます。
デフォルトは黒色,透明(0,0,0,0)です。

\begin{verbatim}
void 	setColor (int argb)
\end{verbatim}

引数はargb形式で指定します。

\begin{verbatim}
 int argb = (a << 24) | (r << 16) | (g << 8) | (b << 0);
\end{verbatim}


\subsubsection{背景画像}

背景を単一の色で塗りつぶす代わりに画像を使うにはsetImage()メソッドを使います。
背景画像にはjpegかpngが利用できます。
現在のDesktop-M3Gの実装ではpngのみサポートしています。
デフォルトで背景画像は設定されていません。

\begin{verbatim}
void 	setImage (Image2D *image)
\end{verbatim}

引数のimageには画像を設定済みのImage2Dオブジェクトを渡します。

設定した画像はgetImage()メソッドで取得できます。

\begin{verbatim}
Image2D * 	getImage () const 
\end{verbatim}

デフォルトでは指定した画像がビューポート全体に拡大もしくは縮小されて表示されます。
setCrop()メソッドで画像のクロップ領域（画像から一部分を切り出した矩形）を
設定する事ができます。

\begin{verbatim}
void 	setCrop (int crop_x, int rop_y, int width, int height)
\end{verbatim}

4つの引数はクロップ領域を指定します。
(crop\_x,crop\_y)は画像の左上の点をピクセル単位で、
(width,height)は大きさをピクセル単位で指定します。
width,heightには0以上の値を指定します。
クロップ領域の指定は画像サイズ(0,0)〜(image\_width-1,image\_height-1)に限定されません。
画像サイズを超える領域を指定した場合の取り扱い方法はsetImageMode()メソッドで指定します。
クロップ領域の使い方として例えば毎フレームクロップ領域を移動する事で背景画像を
スクロールさせる事ができます。

現在のクロップ領域はgetCropX(), getCropY(), getCropWidth(), 
getCropHeight(),メソッドで取得します。

\begin{verbatim}
int 	getCropHeight () const
int 	getCropWidth () const
int 	getCropX () const
int 	getCropY () const 
\end{verbatim}

setImageMode()メソッドは背景画像の繰り返しモードを設定します。

\begin{verbatim}
void 	setImageMode (int mode_x, int mode_y)
\end{verbatim}

引数のmode\_x, mode\_yにはそれぞれX方向とY方向の
イメージモードをBORDERとREPEATの２つから選択します。
X方向とY方向は独立して指定できます。
BORDERは領域外を背景色で塗りつぶします。
REPEATは領域外を画像を繰り返します。
画像を敷き詰めた仮想的なタイルから色を取得します。
デフォルトはX方向、Y方向共にBORDERです。

現在のイメージモードはgetImageModeX(), getImageModeY()メソッドで取得します。

\begin{verbatim}
int 	getImageModeX () const
int 	getImageModeY () const 
\end{verbatim}




