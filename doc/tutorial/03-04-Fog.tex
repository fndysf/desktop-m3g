\subsection{フォグ}

フォグはFogクラスで制御します。
フォグは距離に応じてポリゴンカラーとフォグカラーをブレンドして表示します。

ポリゴンの色(Ci)とフォグの色(Cf)は後述のブレンド係数(f)を使って
以下の式で計算されます。

\[ C = f C_{i} + (1-f)C_{f} \]

フォグはインスタンス化した後シーン(World)に追加します。

\begin{verbatim}
Fog* fog = new Fog;
wld->addChild (fog);
\end{verbatim}

フォグには線形フォグと指数フォグの2種類がありsetMode()メソッドで切り替えます。

\begin{verbatim}
    void setMode (int mode);
\end{verbatim}

modeにはLINEARかEXPONENTIALを指定します。
それぞれLINEARが線形フォグ、EXPONENTIALが指数フォグを表します。
デフォルトはLINEARです。

現在のフォグの種類はgetMode()メソッドで取得できます。

\begin{verbatim}
    int getMode () const;
\end{verbatim}

フォグの色はsetColor()メソッドで指定します。

\begin{verbatim}
    void setColor (int rgb);
\end{verbatim}

引数のrgbにはフォグカラーをint型で0x00RRGGBBの形式で指定します。

現在のフォグカラーはgetColor()メソッドで取得できます。

\begin{verbatim}
    int getColor () const;
\end{verbatim}


\subsubsection{線形フォグ}
ビュー座標での距離(z)に比例してフォグカラーが変化するフォグです。
フォグのブレンディング係数(f)は以下の式で計算されます。

\[ f = \frac{far - z}{far - near} \]

nearとfarはsetLinear()メソッドで指定します。

\begin{verbatim}
    void setLinear (float near, float far);
\end{verbatim}

通常$near < far$ですが逆でもかまいません。
その場合は物体が近づくにつれてフォグカラーが強く表示されます。
near == farは指定できません。

現在のnear,farはgetNearDistance()メソッドとgetFarDistance()メソッドを使って取得できます。

\begin{verbatim}
    float getNearDistance () const;
    float getFarDistance () const;
\end{verbatim}


\subsubsection{指数フォグ}
ビュー座標での距離(z)に対して指数的にカラーが変化するフォグです。
フォグのブレンディング係数(f)は以下の式で計算されます。

\[ f = \exp^{-(density \dot z)} \]

densityはsetDensity()メソッドで指定します。

\begin{verbatim}
    void setDensity (float density);
\end{verbatim}

densityは0以上の浮動小数値を指定ます。
ブレンディングの式は線形フォグの時と同じです。

現在のdensityはgetDensity()メソッドを使って取得します。

\begin{verbatim}
    float getDensity () const;
\end{verbatim}





